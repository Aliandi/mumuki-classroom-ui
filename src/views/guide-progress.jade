
.container
  .row.guide-progress-header
    h2
      .col-sm-7
        span
          | {{ guide.name }}
          i.devicons(class='{{ guide.iconClass() }}')
        h5
          a(href='{{ guide.getMumukiURL() }}', target='_blank') {{ 'open_in_atheneum' | translate }}
        small.show {{ guide.chapter.name }}

      .col-sm-5
        .option-buttons
          .btn-group.btn-group-justified.pull-right(role='group')
            label.btn.btn-default(ng-model='showDetails', ng-click='showDetails = !showDetails')
             div {{ (showDetails ? 'hide_details' : 'show_details') | translate }}
            label.btn.btn-default(ng-model='onlyFollowers', ng-click='onlyFollowers = !onlyFollowers')
             div {{ (onlyFollowers ? 'all' : 'only_followers') | translate }}
          .btn-group.btn-group-justified.pull-right(role='group')
            label.btn.btn-default(ng-model='sortType', ng-click='sortType = "progress"')
              | {{ 'by_progress' | translate }}
            label.btn.btn-default(ng-model='sortType', ng-click='sortType = "name"')
              | {{ 'by_name' | translate }}

  br

  .input-group
    i.input-group-addon.fa.fa-search
    input.form-control(id='filter', placeholder='{{ "filter_students" | translate }}', ng-model='listSearch')

  br

  .row.guide-progress-main
    .col-md-4.col-sm-6(
        ng-repeat='progress in guideProgress | orderBy:sortingCriteria(progress) | filter:listSearch | filter:byFollowers')
      .row.guide-progress-blog(ui-sref='classroom.courses.course.guides.guide.students({ student: progress.student.social_id, eid: progress.lastExerciseSubmitted().id })')
        span.col-xs-9.pointer
          img.rounded-x(ng-src='{{ progress.student.image_url }}')
          .name-location
            strong {{ progress.student.fullName() }}
          .name-location
            small
              div(ng-if='!progress.student.email') {{ 'email_not_provided' | translate }}
              a(ng-if='progress.student.email', href='mailto:{{progress.student.email}}') {{progress.student.email}}

        span.col-xs-3
          h4.pull-right(ng-class='"guide-progress-" + progress.colorClass()')
            strong {{ progress.statistics().passed }}
            span &nbsp;/&nbsp;
            span {{ progress.statistics().total }}

        .student-guide-details(ng-show='showDetails')

          div(ng-if='progress.hasSubmissions()')
            section
              .row
                .col-sm-12.detail-title
                  strong Última solución enviada
              .row
                span.col-sm-10
                  a(ui-sref='classroom.courses.course.guides.guide.students({ student: progress.student.social_id, eid: progress.lastExerciseSubmitted().id })')
                    | {{ progress.lastExerciseSubmitted().getName() }}
                span.col-sm-2.pull-right
                  status-icon(status='progress.lastSubmission().status')
                .col-sm-12
                  pre(style='height: 125px; overflow-y: auto')
                    code
                      | {{ progress.lastSubmission().content }}
