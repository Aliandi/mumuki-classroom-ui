
.container
  .row.guide-progress-header
    h2
      .col-sm-8
        span {{ guide.name }}
        i.devicons(class='{{ guide.iconClass() }}')

        small.show {{ guide.lesson.name }}

      .col-sm-4
        small.pull-right
          a(href='{{ guide.getMumukiURL() }}', target='_blank')
            span {{ 'open_in_atheneum' | translate }}

  .panel.panel-default
    .panel-heading

      .row
        .col-md-8.col-sm-6
          div
            span {{ 'last_solution' | translate }}:
            button.btn.btn-link(ng-click='toggleShowDetails()') {{ (showDetails() ? 'hide' : 'show') | translate }}

          div
            span {{ 'show_students' | translate }}:
            button.btn.btn-link(
                ng-click='toggleOnlyFollowers()',
                ng-disabled='onlyFollowers()') {{ 'only_followers' | translate }} ({{ followUpsCount }})
            span -
            button.btn.btn-link(
                ng-click='toggleOnlyFollowers()',
                ng-disabled='!onlyFollowers()') {{ 'all' | translate }} ({{ list.length }})

        .col-md-4.col-sm-6.pull-right
          .input-group
            i.input-group-addon.fa.fa-sort-amount-asc
            select.form-control(ng-model='sortingType')
              option(ng-repeat='x in availableSortingCriterias', value='{{x.type}}') {{ 'by_' + x.type | translate }}
          .input-group
            i.input-group-addon.fa.fa-search
            input.form-control(id='filter', placeholder='{{ "filter_students" | translate }}', ng-model='listSearch')

    .panel-body.guide-progress-main
      .row
        .col-md-4.col-sm-6(ng-repeat='item in list | orderBy:sortingCriteria() | filter:listSearch | filter:byFollowers')
          .row.guide-progress-blog.pointer(
              ui-sref='classroom.courses.course.guides.guide.students({ \
                student: item.student.social_id,                    \
                eid: item.lastExerciseSubmitted().id                \
              })')
            span.col-xs-9
              img.rounded-x(ng-src='{{ item.student.image_url }}')
              .name-location
                strong {{ item.student.fullName() }}
              .name-location
                i.fa.fa-clock-o
                small {{ item.lastSubmission().timeFromNow() }}

            span.col-xs-3
              h4.pull-right(ng-class='"guide-progress-" + item.colorClass()')
                strong {{ item.statistics().passed }}
                span &nbsp;/&nbsp;
                span {{ item.statistics().total }}

            .student-guide-details(ng-show='showDetails()')

              div(ng-if='item.hasSubmissions()')
                section
                  .row
                    .col-sm-12.detail-title
                      strong {{ 'last_solution' | translate }}
                  .row
                    span.col-sm-10
                      a(ui-sref='classroom.courses.course.guides.guide.students({ student: item.student.social_id, eid: item.lastExerciseSubmitted().id })')
                        | {{ item.lastExerciseSubmitted().getName() }}
                    span.col-sm-2.pull-right
                      status-icon(status='item.lastSubmission().status')
                    .col-sm-12
                      pre(style='height: 125px; overflow-y: auto')
                        code
                          | {{ item.lastSubmission().content }}
